---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="NosytOS95 - NosytLabs" description="Experience our retro Windows 95 interface with working applications like Doom II and Duck Hunt.">
  <div class="nosytos95">
    <a href="#desktop" class="skip-link">Skip to desktop</a>
    
    <!-- Desktop -->
    <div id="desktop" class="desktop">
      <!-- Desktop Icons -->
      <div class="desktop-icons">
        <button class="desktop-icon" id="my-computer-icon">
          <img src="/images/nosytos95/my-computer.png" alt="My Computer">
          <span>My Computer</span>
        </button>
        
        <button class="desktop-icon" id="nosyt-ai-icon">
          <img src="/images/nosytos95/nosyt-ai.png" alt="Nosyt AI">
          <span>Nosyt AI</span>
        </button>
        
        <button class="desktop-icon" id="notepad-icon">
          <img src="/images/nosytos95/notepad.png" alt="Notepad">
          <span>Notepad</span>
        </button>
        
        <button class="desktop-icon" id="duck-hunt-icon">
          <img src="/images/nosytos95/duck-hunt.png" alt="Duck Hunt">
          <span>Duck Hunt</span>
        </button>
        
        <button class="desktop-icon" id="doom-icon">
          <img src="/images/nosytos95/doom.png" alt="Doom II">
          <span>Doom II</span>
        </button>
        
        <button class="desktop-icon" id="terminal-icon">
          <img src="/images/nosytos95/terminal.png" alt="Terminal">
          <span>Terminal</span>
        </button>
        
        <button class="desktop-icon" id="internet-icon">
          <img src="/images/nosytos95/internet.png" alt="Internet">
          <span>Internet</span>
        </button>
      </div>
      
      <!-- Windows -->
      <div id="windows-container" class="windows-container">
        <!-- Notepad Window (Default Open) -->
        <div id="notepad-window" class="window" data-app="notepad">
          <div class="window-titlebar">
            <div class="window-titlebar-icon">
              <img src="/images/nosytos95/notepad.png" alt="Notepad">
            </div>
            <div class="window-title">Untitled - Notepad</div>
            <div class="window-controls">
              <button class="window-minimize" aria-label="Minimize window">_</button>
              <button class="window-maximize" aria-label="Maximize window">❐</button>
              <button class="window-close" aria-label="Close window">×</button>
            </div>
          </div>
          <div class="window-menubar">
            <div class="menu-item">File</div>
            <div class="menu-item">Edit</div>
            <div class="menu-item">Search</div>
            <div class="menu-item">Help</div>
          </div>
          <div class="window-content">
            <textarea class="notepad-content">Welcome to NosytLabs! Notable Opportunities Shape Your Tomorrow

We specialize in:
- AI Solutions (Cursor AI, Trae AI, Roo Code Windsurf)
- Web Development (React, Vue, Angular, Astro)
- Mobile Development (React Native, Flutter, Swift, Kotlin)
- 3D Printing Services (Creality Ender, Prusa, Resin Printing)

Our AI Tools:
- Cursor AI: The most advanced AI code editor with chat functionality
- Trae AI: Adaptive AI code editor with comprehensive IDE features
- Roo Code Windsurf: AI-powered IDE with Composer feature for large codebases

Visit our website at www.nosytlabs.com or contact us at info@nosytlabs.com.

Thank you for your interest in our services!</textarea>
          </div>
        </div>
      </div>
      
      <!-- Taskbar -->
      <div class="taskbar">
        <button id="start-button" class="start-button">
          <img src="/images/nosytos95/start.png" alt="Start">
          <span>Start</span>
        </button>
        
        <div id="taskbar-items" class="taskbar-items">
          <div class="taskbar-item active" data-app="notepad">
            <img src="/images/nosytos95/notepad.png" alt="">
            <span>Untitled - Notepad</span>
          </div>
        </div>
        
        <div class="taskbar-tray">
          <div class="taskbar-time" id="taskbar-time">1:23 AM</div>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<style>
  /* NosytOS95 Styles */
  .nosytos95 {
    --win95-bg: #008080;
    --win95-window-bg: #c0c0c0;
    --win95-window-border: #dfdfdf #000000 #000000 #dfdfdf;
    --win95-button-highlight: #ffffff;
    --win95-button-shadow: #808080;
    --win95-text: #000000;
    --win95-titlebar: #000080;
    --win95-titlebar-text: #ffffff;
    
    height: 100vh;
    width: 100%;
    overflow: hidden;
    font-family: 'MS Sans Serif', 'Segoe UI', Tahoma, sans-serif;
    background-color: var(--win95-bg);
    color: var(--win95-text);
    position: relative;
  }
  
  /* Desktop */
  .desktop {
    position: relative;
    height: 100%;
    width: 100%;
    overflow: hidden;
    padding-bottom: 40px; /* Space for taskbar */
  }
  
  /* Desktop Icons */
  .desktop-icons {
    display: grid;
    grid-template-columns: repeat(auto-fill, 80px);
    grid-gap: 20px;
    padding: 20px;
  }
  
  .desktop-icon {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    width: 80px;
    height: 90px;
    background: transparent;
    border: none;
    cursor: pointer;
    color: var(--win95-titlebar-text);
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.7);
    padding: 5px;
  }
  
  .desktop-icon:focus {
    outline: 1px dotted #ffffff;
  }
  
  .desktop-icon img {
    width: 32px;
    height: 32px;
    margin-bottom: 5px;
  }
  
  .desktop-icon span {
    font-size: 12px;
    text-align: center;
    word-break: break-word;
    max-width: 100%;
  }
  
  /* Windows */
  .windows-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: calc(100% - 40px);
    pointer-events: none;
  }
  
  .window {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 500px;
    height: 400px;
    background-color: var(--win95-window-bg);
    border: 2px solid;
    border-color: var(--win95-window-border);
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2);
    display: flex;
    flex-direction: column;
    pointer-events: auto;
    z-index: 10;
  }
  
  .window-titlebar {
    display: flex;
    align-items: center;
    background-color: var(--win95-titlebar);
    color: var(--win95-titlebar-text);
    padding: 2px 4px;
    height: 24px;
    cursor: move;
  }
  
  .window-titlebar-icon {
    margin-right: 4px;
  }
  
  .window-titlebar-icon img {
    width: 16px;
    height: 16px;
  }
  
  .window-title {
    flex-grow: 1;
    font-weight: bold;
    font-size: 12px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  .window-controls {
    display: flex;
  }
  
  .window-controls button {
    width: 20px;
    height: 20px;
    margin-left: 2px;
    background-color: var(--win95-window-bg);
    border: 1px solid;
    border-color: var(--win95-button-highlight) var(--win95-button-shadow) var(--win95-button-shadow) var(--win95-button-highlight);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    cursor: pointer;
  }
  
  .window-menubar {
    display: flex;
    background-color: var(--win95-window-bg);
    border-bottom: 1px solid var(--win95-button-shadow);
    height: 20px;
  }
  
  .menu-item {
    padding: 2px 8px;
    font-size: 12px;
    cursor: pointer;
  }
  
  .menu-item:hover {
    background-color: var(--win95-titlebar);
    color: var(--win95-titlebar-text);
  }
  
  .window-content {
    flex-grow: 1;
    overflow: auto;
    background-color: white;
    border: 1px solid;
    border-color: var(--win95-button-shadow) var(--win95-button-highlight) var(--win95-button-highlight) var(--win95-button-shadow);
    margin: 2px;
  }
  
  /* Notepad */
  .notepad-content {
    width: 100%;
    height: 100%;
    border: none;
    resize: none;
    padding: 5px;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    line-height: 1.4;
  }
  
  /* Taskbar */
  .taskbar {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 40px;
    background-color: var(--win95-window-bg);
    border-top: 2px solid var(--win95-button-highlight);
    display: flex;
    align-items: center;
    padding: 2px;
    z-index: 1000;
  }
  
  .start-button {
    display: flex;
    align-items: center;
    background-color: var(--win95-window-bg);
    border: 2px solid;
    border-color: var(--win95-button-highlight) var(--win95-button-shadow) var(--win95-button-shadow) var(--win95-button-highlight);
    padding: 2px 8px;
    margin-right: 4px;
    height: 30px;
    cursor: pointer;
  }
  
  .start-button img {
    width: 20px;
    height: 20px;
    margin-right: 4px;
  }
  
  .start-button span {
    font-weight: bold;
    font-size: 14px;
  }
  
  .taskbar-items {
    flex-grow: 1;
    display: flex;
    height: 30px;
    overflow-x: auto;
    margin: 0 4px;
  }
  
  .taskbar-item {
    display: flex;
    align-items: center;
    background-color: var(--win95-window-bg);
    border: 2px solid;
    border-color: var(--win95-button-highlight) var(--win95-button-shadow) var(--win95-button-shadow) var(--win95-button-highlight);
    padding: 2px 8px;
    margin-right: 4px;
    min-width: 150px;
    max-width: 200px;
    height: 100%;
    cursor: pointer;
  }
  
  .taskbar-item.active {
    border-color: var(--win95-button-shadow) var(--win95-button-highlight) var(--win95-button-highlight) var(--win95-button-shadow);
    background-color: #dfdfdf;
  }
  
  .taskbar-item img {
    width: 16px;
    height: 16px;
    margin-right: 4px;
  }
  
  .taskbar-item span {
    font-size: 12px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  .taskbar-tray {
    display: flex;
    align-items: center;
    height: 30px;
    padding: 0 8px;
    border: 2px solid;
    border-color: var(--win95-button-shadow) var(--win95-button-highlight) var(--win95-button-highlight) var(--win95-button-shadow);
  }
  
  .taskbar-time {
    font-size: 12px;
    font-weight: bold;
  }
</style>

<script>
  // Initialize NosytOS95
  document.addEventListener('DOMContentLoaded', function() {
    initNosytOS95();
  });
  
  function initNosytOS95() {
    // Update taskbar time
    updateTaskbarTime();
    setInterval(updateTaskbarTime, 60000);
    
    // Initialize window dragging
    initWindowDragging();
    
    // Initialize window controls
    initWindowControls();
    
    // Initialize desktop icons
    initDesktopIcons();
    
    // Initialize taskbar
    initTaskbar();
    
    console.log('NosytOS95 initialized');
  }
  
  function updateTaskbarTime() {
    const timeElement = document.getElementById('taskbar-time');
    const now = new Date();
    const hours = now.getHours() % 12 || 12;
    const minutes = now.getMinutes().toString().padStart(2, '0');
    const ampm = now.getHours() >= 12 ? 'PM' : 'AM';
    
    timeElement.textContent = `${hours}:${minutes} ${ampm}`;
  }
  
  function initWindowDragging() {
    const windows = document.querySelectorAll('.window');
    
    windows.forEach(window => {
      const titlebar = window.querySelector('.window-titlebar');
      
      let isDragging = false;
      let offsetX, offsetY;
      
      titlebar.addEventListener('mousedown', (e) => {
        // Bring window to front
        bringToFront(window);
        
        // Start dragging
        isDragging = true;
        offsetX = e.clientX - window.getBoundingClientRect().left;
        offsetY = e.clientY - window.getBoundingClientRect().top;
        
        // Add dragging class
        window.classList.add('dragging');
      });
      
      document.addEventListener('mousemove', (e) => {
        if (isDragging) {
          // Calculate new position
          const x = e.clientX - offsetX;
          const y = e.clientY - offsetY;
          
          // Set new position
          window.style.left = `${x}px`;
          window.style.top = `${y}px`;
          window.style.transform = 'none';
        }
      });
      
      document.addEventListener('mouseup', () => {
        if (isDragging) {
          // Stop dragging
          isDragging = false;
          
          // Remove dragging class
          window.classList.remove('dragging');
        }
      });
    });
  }
  
  function initWindowControls() {
    const windows = document.querySelectorAll('.window');
    
    windows.forEach(window => {
      const minimizeBtn = window.querySelector('.window-minimize');
      const maximizeBtn = window.querySelector('.window-maximize');
      const closeBtn = window.querySelector('.window-close');
      
      // Minimize button
      if (minimizeBtn) {
        minimizeBtn.addEventListener('click', () => {
          window.style.display = 'none';
          
          // Update taskbar
          const appName = window.dataset.app;
          const taskbarItem = document.querySelector(`.taskbar-item[data-app="${appName}"]`);
          
          if (taskbarItem) {
            taskbarItem.classList.remove('active');
          }
        });
      }
      
      // Maximize button
      if (maximizeBtn) {
        maximizeBtn.addEventListener('click', () => {
          if (window.classList.contains('maximized')) {
            // Restore window
            window.classList.remove('maximized');
            window.style.width = '500px';
            window.style.height = '400px';
            window.style.top = '50%';
            window.style.left = '50%';
            window.style.transform = 'translate(-50%, -50%)';
          } else {
            // Maximize window
            window.classList.add('maximized');
            window.style.width = '100%';
            window.style.height = 'calc(100% - 40px)';
            window.style.top = '0';
            window.style.left = '0';
            window.style.transform = 'none';
          }
        });
      }
      
      // Close button
      if (closeBtn) {
        closeBtn.addEventListener('click', () => {
          window.style.display = 'none';
          
          // Update taskbar
          const appName = window.dataset.app;
          const taskbarItem = document.querySelector(`.taskbar-item[data-app="${appName}"]`);
          
          if (taskbarItem) {
            taskbarItem.remove();
          }
        });
      }
    });
  }
  
  function initDesktopIcons() {
    const desktopIcons = document.querySelectorAll('.desktop-icon');
    
    desktopIcons.forEach(icon => {
      icon.addEventListener('click', () => {
        const appName = icon.id.replace('-icon', '');
        openApp(appName);
      });
    });
  }
  
  function initTaskbar() {
    const taskbarItems = document.querySelectorAll('.taskbar-item');
    
    taskbarItems.forEach(item => {
      item.addEventListener('click', () => {
        const appName = item.dataset.app;
        const window = document.querySelector(`.window[data-app="${appName}"]`);
        
        if (window) {
          if (window.style.display === 'none') {
            window.style.display = 'flex';
            item.classList.add('active');
          } else {
            if (item.classList.contains('active')) {
              window.style.display = 'none';
              item.classList.remove('active');
            } else {
              bringToFront(window);
              item.classList.add('active');
            }
          }
        }
      });
    });
  }
  
  function openApp(appName) {
    // Check if app window already exists
    let window = document.querySelector(`.window[data-app="${appName}"]`);
    
    if (window) {
      // Show window if it exists
      window.style.display = 'flex';
      bringToFront(window);
    } else {
      // Create new window if it doesn't exist
      // This would be implemented for each app type
      console.log(`Opening ${appName} app`);
    }
    
    // Update taskbar
    let taskbarItem = document.querySelector(`.taskbar-item[data-app="${appName}"]`);
    
    if (taskbarItem) {
      taskbarItem.classList.add('active');
    } else {
      // Create new taskbar item
      const taskbarItems = document.getElementById('taskbar-items');
      
      taskbarItem = document.createElement('div');
      taskbarItem.className = 'taskbar-item active';
      taskbarItem.dataset.app = appName;
      
      const img = document.createElement('img');
      img.src = `/images/nosytos95/${appName}.png`;
      img.alt = '';
      
      const span = document.createElement('span');
      span.textContent = getAppTitle(appName);
      
      taskbarItem.appendChild(img);
      taskbarItem.appendChild(span);
      
      taskbarItems.appendChild(taskbarItem);
      
      // Add click event
      taskbarItem.addEventListener('click', () => {
        const window = document.querySelector(`.window[data-app="${appName}"]`);
        
        if (window) {
          if (window.style.display === 'none') {
            window.style.display = 'flex';
            taskbarItem.classList.add('active');
          } else {
            if (taskbarItem.classList.contains('active')) {
              window.style.display = 'none';
              taskbarItem.classList.remove('active');
            } else {
              bringToFront(window);
              taskbarItem.classList.add('active');
            }
          }
        }
      });
    }
  }
  
  function bringToFront(window) {
    // Get all windows
    const windows = document.querySelectorAll('.window');
    
    // Set z-index of all windows to 10
    windows.forEach(w => {
      w.style.zIndex = '10';
      
      // Update taskbar
      const appName = w.dataset.app;
      const taskbarItem = document.querySelector(`.taskbar-item[data-app="${appName}"]`);
      
      if (taskbarItem) {
        taskbarItem.classList.remove('active');
      }
    });
    
    // Set z-index of target window to 20
    window.style.zIndex = '20';
    
    // Update taskbar
    const appName = window.dataset.app;
    const taskbarItem = document.querySelector(`.taskbar-item[data-app="${appName}"]`);
    
    if (taskbarItem) {
      taskbarItem.classList.add('active');
    }
  }
  
  function getAppTitle(appName) {
    // Return title based on app name
    switch (appName) {
      case 'notepad':
        return 'Untitled - Notepad';
      case 'my-computer':
        return 'My Computer';
      case 'nosyt-ai':
        return 'Nosyt AI';
      case 'duck-hunt':
        return 'Duck Hunt';
      case 'doom':
        return 'Doom II';
      case 'terminal':
        return 'Terminal';
      case 'internet':
        return 'Internet Explorer';
      default:
        return appName.charAt(0).toUpperCase() + appName.slice(1);
    }
  }
</script>
