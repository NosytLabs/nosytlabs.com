@layer utilities {
  /* Modern Scroll Reveal Animations with CSS Custom Properties */
  .scroll-reveal {
    opacity: 0;
    transform: translateY(var(--motion-translate-enter));
    transition: all var(--duration-slow) var(--ease-out);
    will-change: transform, opacity;
  }

  .scroll-reveal.revealed {
    opacity: 1;
    transform: translateY(0);
  }

  .scroll-reveal-left {
    opacity: 0;
    transform: translateX(calc(var(--motion-translate-enter) * -1));
    transition: all var(--duration-slow) var(--ease-out);
    will-change: transform, opacity;
  }

  .scroll-reveal-left.revealed {
    opacity: 1;
    transform: translateX(0);
  }

  .scroll-reveal-right {
    opacity: 0;
    transform: translateX(var(--motion-translate-enter));
    transition: all var(--duration-slow) var(--ease-out);
    will-change: transform, opacity;
  }

  .scroll-reveal-right.revealed {
    opacity: 1;
    transform: translateX(0);
  }

  .scroll-reveal-scale {
    opacity: 0;
    transform: scale(var(--motion-scale-enter));
    transition: all var(--duration-slow) var(--ease-out);
    will-change: transform, opacity;
  }

  .scroll-reveal-scale.revealed {
    opacity: 1;
    transform: scale(1);
  }

  /* Staggered Animations with CSS Custom Properties */
  .stagger-children > * {
    opacity: 0;
    transform: translateY(calc(var(--motion-translate-enter) / 2));
    transition: all var(--duration-standard) var(--ease-out);
    will-change: transform, opacity;
  }

  .stagger-children.revealed > *:nth-child(1) { transition-delay: 0ms; }
  .stagger-children.revealed > *:nth-child(2) { transition-delay: var(--stagger-base); }
  .stagger-children.revealed > *:nth-child(3) { transition-delay: calc(var(--stagger-base) * 2); }
  .stagger-children.revealed > *:nth-child(4) { transition-delay: calc(var(--stagger-base) * 3); }
  .stagger-children.revealed > *:nth-child(5) { transition-delay: calc(var(--stagger-base) * 4); }
  .stagger-children.revealed > *:nth-child(6) { transition-delay: calc(var(--stagger-base) * 5); }

  .stagger-children.revealed > * {
    opacity: 1;
    transform: translateY(0);
  }

  .stagger-item {
    opacity: 0;
    transform: translateY(calc(var(--motion-translate-enter) / 2));
    transition: all var(--duration-standard) var(--ease-out);
    will-change: transform, opacity;
  }

  .stagger-item.revealed {
    opacity: 1;
    transform: translateY(0);
  }

  .stagger-item:nth-child(1) { transition-delay: 0ms; }
  .stagger-item:nth-child(2) { transition-delay: 100ms; }
  .stagger-item:nth-child(3) { transition-delay: 200ms; }
  .stagger-item:nth-child(4) { transition-delay: 300ms; }
  .stagger-item:nth-child(5) { transition-delay: 400ms; }
  .stagger-item:nth-child(6) { transition-delay: 500ms; }

  /* Modern Hover Animations */
  .hover-lift {
    transition: transform var(--duration-quick) var(--ease-out);
    will-change: transform;
  }

  .hover-lift:hover {
    transform: translateY(calc(var(--motion-translate-enter) * -0.5)) scale(1.02);
  }

  .hover-glow {
    transition: all var(--duration-quick) var(--ease-out);
    will-change: box-shadow, transform;
  }

  .hover-glow:hover {
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    transform: translateY(-1px);
  }

  .hover-scale {
    @apply transition-transform duration-300 ease-out;
  }

  .hover-scale:hover {
    @apply scale-105;
  }

  .hover-scale-sm {
    @apply transition-transform duration-300 ease-out;
  }

  .hover-scale-sm:hover {
    transform: scale(1.02);
  }

  .hover-rotate {
    @apply transition-transform duration-300 ease-out;
  }

  .hover-rotate:hover {
    @apply rotate-3;
  }

  .hover-tilt {
    @apply transition-transform duration-300 ease-out;
  }

  .hover-tilt:hover {
    @apply -rotate-1 scale-105;
  }

  /* Focus Animations */
  .focus-ring {
    @apply transition-all duration-200;
    @apply focus:ring-2 focus:ring-primary-500/50 focus:ring-offset-2;
  }

  .focus-scale {
    @apply transition-transform duration-200;
    @apply focus:scale-105;
  }

  /* Loading Animations */
  .loading-spinner {
    @apply animate-spin;
  }

  .loading-pulse {
    @apply animate-pulse;
  }

  .loading-bounce {
    @apply animate-bounce;
  }

  .loading-dots {
    @apply relative;
  }

  .loading-dots::after {
    content: '';

    @apply absolute right-0;
    animation: loading-dots 1.5s infinite;
  }

  @keyframes loading-dots {
    0%, 20% { content: ''; }
    40% { content: '.'; }
    60% { content: '..'; }
    80%, 100% { content: '...'; }
  }

  /* Micro-interactions */
  .micro-bounce {
    @apply transition-transform duration-150 ease-out;
  }

  .micro-bounce:active {
    @apply scale-95;
  }

  .micro-shake {
    animation: shake 0.5s ease-in-out;
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-4px); }
    75% { transform: translateX(4px); }
  }

  .micro-wiggle {
    animation: wiggle 0.5s ease-in-out;
  }

  @keyframes wiggle {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-3deg); }
    75% { transform: rotate(3deg); }
  }

  /* Entrance Animations */
  .entrance-fade {
    animation: fade-in 0.6s ease-out;
  }

  .entrance-slide-up {
    animation: slide-up 0.6s ease-out;
  }

  .entrance-slide-down {
    animation: slide-down 0.6s ease-out;
  }

  .entrance-slide-left {
    animation: slide-left 0.6s ease-out;
  }

  .entrance-slide-right {
    animation: slide-right 0.6s ease-out;
  }

  .entrance-zoom {
    animation: zoom-in 0.6s ease-out;
  }

  .entrance-flip {
    animation: flip-in 0.6s ease-out;
  }

  /* Exit Animations */
  .exit-fade {
    animation: fade-out 0.3s ease-in;
  }

  .exit-slide-up {
    animation: slide-out-up 0.3s ease-in;
  }

  .exit-slide-down {
    animation: slide-out-down 0.3s ease-in;
  }

  .exit-zoom {
    animation: zoom-out 0.3s ease-in;
  }

  /* Keyframe Definitions */
  @keyframes fade-in {
    from { opacity: 0%; }
    to { opacity: 100%; }
  }

  @keyframes fade-in {
    from { opacity: 0%; }
    to { opacity: 100%; }
  }

  @keyframes fade-out {
    from { opacity: 100%; }
    to { opacity: 0%; }
  }

  @keyframes slide-up {
    from {
      opacity: 0%;
      transform: translateY(32px);
    }

    to {
      opacity: 100%;
      transform: translateY(0);
    }
  }

  @keyframes slide-down {
    from {
      opacity: 0%;
      transform: translateY(-32px);
    }

    to {
      opacity: 100%;
      transform: translateY(0);
    }
  }

  @keyframes slide-left {
    from {
      opacity: 0%;
      transform: translateX(32px);
    }

    to {
      opacity: 100%;
      transform: translateX(0);
    }
  }

  @keyframes slide-right {
    from {
      opacity: 0%;
      transform: translateX(-32px);
    }

    to {
      opacity: 100%;
      transform: translateX(0);
    }
  }

  @keyframes slide-out-up {
    from {
      opacity: 100%;
      transform: translateY(0);
    }

    to {
      opacity: 0%;
      transform: translateY(-32px);
    }
  }

  @keyframes slide-out-down {
    from {
      opacity: 100%;
      transform: translateY(0);
    }

    to {
      opacity: 0%;
      transform: translateY(32px);
    }
  }

  @keyframes zoom-in {
    from {
      opacity: 0%;
      transform: scale(0.9);
    }

    to {
      opacity: 100%;
      transform: scale(1);
    }
  }

  @keyframes zoom-out {
    from {
      opacity: 100%;
      transform: scale(1);
    }

    to {
      opacity: 0%;
      transform: scale(0.9);
    }
  }

  @keyframes flip-in {
    from {
      opacity: 0%;
      transform: rotateY(-90deg);
    }

    to {
      opacity: 100%;
      transform: rotateY(0);
    }
  }

  /* Parallax Effects */
  .parallax {
    transform: translateZ(0);
    will-change: transform;
  }

  .parallax-slow {
    transform: translate3d(0, calc(var(--scroll-y, 0) * -0.5px), 0);
  }

  .parallax-medium {
    transform: translate3d(0, calc(var(--scroll-y, 0) * -0.3px), 0);
  }

  .parallax-fast {
    transform: translate3d(0, calc(var(--scroll-y, 0) * -0.8px), 0);
  }

  /* Scroll Progress Indicator */
  .scroll-progress {
    @apply fixed top-0 left-0 h-1 bg-primary-600 z-50;
    @apply transition-all duration-150 ease-out;
    width: calc(var(--scroll-progress, 0) * 1%);
  }

  /* Reduced Motion Support */
  @media (prefers-reduced-motion: reduce) {
    .scroll-reveal,
    .scroll-reveal-left,
    .scroll-reveal-right,
    .scroll-reveal-scale,
    .stagger-item {
      @apply opacity-100 translate-x-0 translate-y-0 scale-100;
      @apply transition-none;
    }

    .hover-lift:hover,
    .hover-scale:hover,
    .hover-scale-sm:hover,
    .hover-rotate:hover,
    .hover-tilt:hover {
      @apply transform-none;
    }

    .entrance-fade,
    .entrance-slide-up,
    .entrance-slide-down,
    .entrance-slide-left,
    .entrance-slide-right,
    .entrance-zoom,
    .entrance-flip {
      animation: none;
    }

    .parallax-slow,
    .parallax-medium,
    .parallax-fast {
      transform: none;
    }
  }

  /* Performance Optimizations */
  .will-change-transform {
    will-change: transform;
  }

  .will-change-opacity {
    will-change: opacity;
  }

  .will-change-auto {
    will-change: auto;
  }

  .gpu-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }
}