---
// Astro Icon Component - Pure Astro implementation
export interface Props {
  name: string;
  className?: string;
  size?: number;
}

const { name, class: classAttr = '', className = '', size = 24 } = Astro.props;

// Map tabler: prefixed icons to internal names
const mapTablerIcons = (iconName: string): string => {
  if (!iconName.startsWith('tabler:')) return iconName;
  
  const tablerName = iconName.replace('tabler:', '');
  const mapping: Record<string, string> = {
    'book': 'lightbulb', // fallback
    'user-circle': 'user',
    'mail': 'mail',
    'map-pin': 'mapPin',
    'arrow-right': 'arrowRight',
    'heart': 'lightbulb', // fallback - no heart icon
    'player-play': 'arrowRight', // close approximation
    'star-filled': 'lightbulb', // fallback
    'users': 'users',
    'briefcase': 'lightbulb', // fallback
    'star': 'lightbulb', // fallback
    'flask': 'lightbulb', // fallback
    'sparkles': 'zap', // close approximation
    'send': 'send',
    'tag': 'lightbulb', // fallback
    'brand-github': 'external-link', // fallback to external link
    'brand-kick': 'external-link',
    'brand-youtube': 'external-link',
    'arrow-down': 'chevronDown',
    'code': 'code',
    'check': 'check-circle',
    'shield-check': 'shield-check',
    'settings': 'settings',
    'brain': 'lightbulb', // fallback
    'phone': 'phone',
    'building': 'lightbulb', // fallback
  };
  
  return mapping[tablerName] || 'lightbulb';
};

const mappedName = mapTablerIcons(name);

// Icon SVG paths mapping - Optimized and consistent icon set
const iconPaths: Record<string, string> = {
  // Status and feedback icons
  'check-circle': 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z',
  'x-circle': 'M9 9l6 6m0-6l-6 6m12-3a9 9 0 11-18 0 9 9 0 0118 0z',
  'alert-circle': 'M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z',
  info: 'M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z',

  // Navigation and action icons
  arrowRight: 'M5 12h14m-7-7l7 7-7 7',
  arrowLeft: 'M19 12H5m7 7l-7-7 7-7',
  chevronDown: 'M6 9l6 6 6-6',
  chevronUp: 'M18 15l-6-6-6 6',
  'external-link': 'M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6m4-3h6v6m-11 5L21 3',

  // Communication icons
  mail: 'M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z m0 2l8 5 8-5',
  phone:
    'M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z',
  send: 'M22 2L11 13l-3-3m0 0l-2 2 5 5L22 6',
  'message-circle':
    'M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z',

  // Technology and business icons
  code: 'M16 18l6-6-6-6m-8 12L2 12l6-6',
  terminal: 'M4 17l6-6-6-6m8 14h8',
  cpu: 'M4 16v1a3 3 0 003 3h1m-4-4h16m0 0v1a3 3 0 01-3 3h-1m4-4V8a3 3 0 00-3-3h-1m4 4H4m0 0V8a3 3 0 013-3h1m-4 4h16',
  database:
    'M21 12c0 1.66-4 3-9 3s-9-1.34-9-3m18 0c0-1.66-4-3-9-3s-9 1.34-9 3m18 0v6c0 1.66-4 3-9 3s-9-1.34-9-3v-6m18 0V6c0-1.66-4-3-9-3S3 4.34 3 6v6',
  server:
    'M6 10H4a2 2 0 01-2-2V4c0-1.1.9-2 2-2h16a2 2 0 012 2v4a2 2 0 01-2 2h-2M6 10l6 6 6-6M6 10l6-6 6 6',
  globe:
    'M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9',
  zap: 'M13 2L3 14h9l-1 8 10-12h-9l1-8z',
  bot: 'M12 8V4l3 4h4l-3 4h3l-4 4-4-4h3l-3-4z',
  lightbulb:
    'M9 21c0 .5.4 1 1 1h4c.6 0 1-.4 1-1v-1H9v1zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17h8v-2.3c1.8-1.2 3-3.3 3-5.7 0-3.9-3.1-7-7-7z',

  // User and team icons
  user: 'M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2m8-10a4 4 0 100-8 4 4 0 000 8z',
  users: 'M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2m22-2v-2a4 4 0 00-3-3.87m-3-4a4 4 0 010 7.75',
  'user-check':
    'M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2m11-10a4 4 0 100-8 4 4 0 000 8zm6 2l2 2 4-4',

  // Time and location icons
  clock: 'M12 6v6l4 2m6-2a10 10 0 11-20 0 10 10 0 0120 0z',
  calendar: 'M8 2v4m8-4v4M3 10h18M5 4h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V6a2 2 0 012-2z',
  mapPin: 'M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z m-9 3a3 3 0 100-6 3 3 0 000 6z',

  // Security and quality icons
  shield: 'M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z',
  'shield-check': 'M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10zm-2-8l2 2 4-4',
  lock: 'M19 11H5a2 2 0 00-2 2v7a2 2 0 002 2h14a2 2 0 002-2v-7a2 2 0 00-2-2zM7 11V7a5 5 0 0110 0v4',
  target: 'M12 2l3.09 6.26L22 9l-5.55 5.55L18 21l-6-3.27L6 21l1.55-6.45L2 9l6.91-.74L12 2z',

  // Interface icons
  menu: 'M3 12h18M3 6h18M3 18h18',
  x: 'M18 6L6 18M6 6l12 12',
  plus: 'M12 5v14m-7-7h14',
  minus: 'M5 12h14',
  search: 'M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z',
  settings: 'M12 15a3 3 0 100-6 3 3 0 000 6z m7.5-3a7.5 7.5 0 11-15 0 7.5 7.5 0 0115 0z',
  download: 'M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4m4-5l5 5 5-5m-5 5V3',
  upload: 'M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4m4-5l5-5 5 5m-5-5v12',
};

const iconPath = iconPaths[mappedName] || iconPaths['lightbulb']; // fallback to lightbulb
---

<svg
  width={size}
  height={size}
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
  class={`${classAttr} ${className}`.trim()}
>
  <path d={iconPath}></path>
</svg>
