---
/**
 * GlitchText Component
 * Creates a glitch text effect with customizable animations
 */

interface Props {
  text: string;
  class?: string;
  animation?: 'glitch' | 'fade' | 'slide';
  duration?: string;
  size?: 'sm' | 'md' | 'lg' | 'xl';
}

const { 
  text, 
  class: className = '', 
  animation = 'glitch',
  duration = '2s',
  size = 'md'
} = Astro.props;

const sizeClasses = {
  sm: 'text-lg',
  md: 'text-2xl',
  lg: 'text-4xl',
  xl: 'text-6xl'
};
---

<div 
  class={`glitch-text ${sizeClasses[size]} ${className}`}
  data-text={text}
  style={`--glitch-duration: ${duration}`}
>
  {text}
</div>

<style>
  .glitch-text {
    position: relative;
    font-weight: bold;
    color: #fff;
    letter-spacing: 3px;
    text-transform: uppercase;
    animation: glitch var(--glitch-duration, 2s) infinite;
  }

  .glitch-text::before,
  .glitch-text::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .glitch-text::before {
    animation: glitch-top var(--glitch-duration, 2s) infinite;
    clip-path: polygon(0 0, 100% 0, 100% 33%, 0 33%);
    color: #ff3333;
    z-index: -1;
  }

  .glitch-text::after {
    animation: glitch-bottom var(--glitch-duration, 2s) infinite;
    clip-path: polygon(0 67%, 100% 67%, 100% 100%, 0 100%);
    color: #33ff33;
    z-index: -2;
  }

  @keyframes glitch {
    0%, 74%, 76%, 82%, 90%, 100% {
      transform: translate(0);
    }
    75% {
      transform: translate(-2px, 2px);
    }
    80% {
      transform: translate(2px, -2px);
    }
    85% {
      transform: translate(-2px, -2px);
    }
  }

  @keyframes glitch-top {
    0%, 74%, 76%, 82%, 90%, 100% {
      transform: translateX(0);
    }
    75% {
      transform: translateX(2px);
    }
    80% {
      transform: translateX(-2px);
    }
    85% {
      transform: translateX(2px);
    }
  }

  @keyframes glitch-bottom {
    0%, 74%, 76%, 82%, 90%, 100% {
      transform: translateX(0);
    }
    75% {
      transform: translateX(-2px);
    }
    80% {
      transform: translateX(2px);
    }
    85% {
      transform: translateX(-2px);
    }
  }

  /* Accessibility: Respect prefers-reduced-motion */
  @media (prefers-reduced-motion: reduce) {
    .glitch-text,
    .glitch-text::before,
    .glitch-text::after {
      animation: none;
    }
  }
</style>
