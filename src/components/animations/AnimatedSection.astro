---
// AnimatedSection.astro
// Enhanced scroll-triggered animation component using the new animation system

export interface Props {
  animation?: 'fade-in-up' | 'fade-in-down' | 'fade-in-left' | 'fade-in-right' | 'fade-in' | 'scale-in' | 'slide-up' | 'slide-down' | 'slide-left' | 'slide-right' | 'zoom-in' | 'rotate-in' | 'flip-x' | 'flip-y' | 'typewriter' | 'count-up' | 'progress' | 'color-reveal';
  delay?: number;
  threshold?: number;
  once?: boolean;
  stagger?: boolean;
  staggerDelay?: number;
  class?: string;
  id?: string;
  // Special animation options
  countTarget?: number;
  countDuration?: number;
  progressWidth?: string;
  revealColor?: 'blue' | 'orange' | 'red' | 'green';
  typewriterSpeed?: number;
}

const {
  animation = 'fade-in-up',
  delay = 0,
  threshold = 0.2,
  once = true,
  stagger = false,
  staggerDelay = 100,
  class: className = '',
  id,
  countTarget,
  countDuration,
  progressWidth,
  revealColor = 'blue',
  typewriterSpeed = 50
} = Astro.props;

// Generate a unique ID for this section
const sectionId = id || `animated-section-${Math.random().toString(36).substring(2, 9)}`;

// DEBUG: Log AnimatedSection rendering
console.log('DEBUG: AnimatedSection rendering with ID:', sectionId, 'animation:', animation);
console.log('ðŸš¨ CRITICAL DEBUG: AnimatedSection adds data-scroll-animate which CSS hides with opacity:0');
console.log('ðŸš¨ CRITICAL DEBUG: Animation scripts are DISABLED in BaseLayout.astro lines 138-141');
---

<section
  id={sectionId}
  class={`${className}`}
  data-scroll-animate
  data-animation-type={animation}
  data-delay={delay}
  data-threshold={threshold}
  data-once={once}
  data-stagger={stagger}
  data-stagger-delay={staggerDelay}
  data-count-target={countTarget}
  data-count-duration={countDuration}
  data-progress-width={progressWidth}
  data-reveal-color={revealColor}
  data-typewriter-speed={typewriterSpeed}
>
  <slot />
</section>

