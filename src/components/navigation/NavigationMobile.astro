---
import NavigationLinks from './NavigationLinks.astro';
import CallToAction from '../ui/CallToAction.astro';

export interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;
---

<div
  id="mobile-menu"
  class="fixed inset-0 z-40 hidden h-full w-full bg-background-dark/80 backdrop-blur-sm dark:bg-background-dark/90"
  aria-hidden="true"
  role="dialog"
  aria-modal="true"
  aria-labelledby="mobile-menu-title"
  data-mobile-menu="true"
>
  <div class="mobile-menu-content-wrapper">
    <div class="mobile-menu-content">
      <div class="flex items-center justify-between mb-6">
        <h2 id="mobile-menu-title" class="text-xl font-semibold text-text-dark dark:text-text-dark">
          Navigation Menu
        </h2>
        <button
          type="button"
          id="mobile-menu-close"
          class="p-2 text-text-muted hover:text-text dark:text-text-muted-dark dark:hover:text-text-dark focus:outline-none focus:ring-2 focus:ring-primary-500 rounded-lg"
          aria-label="Close navigation menu"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <nav aria-label="Mobile navigation">
        <NavigationLinks layout="vertical" {currentPath} class="flex flex-col space-y-2" />
      </nav>
      <div class="mt-8">
        <CallToAction href="/get-started" class="w-full"> Get Started </CallToAction>
      </div>
    </div>
  </div>
</div>

<style>
  .mobile-menu-content-wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-width: 500px;
  }

  .mobile-menu-content {
    background: rgb(var(--background-rgb) / 0.95);
    padding: 2.5rem;
    border-radius: 1.25rem;
    box-shadow: 0 20px 40px var(--shadow-color);
    backdrop-filter: blur(20px);
    border: 1px solid rgb(var(--border-rgb) / 0.3);
    transition: all 0.3s ease;
  }

  .dark .mobile-menu-content {
    background: rgb(var(--background-dark-rgb) / 0.95);
    border-color: rgb(var(--border-dark-rgb) / 0.15);
    box-shadow: 0 20px 40px var(--shadow-color-dark);
  }

  #mobile-menu.open {
    display: block;
  }
</style>
