---
// Modern particle background effect for NosytLabs
interface Props {
  particleCount?: number;
  color?: string;
  size?: 'small' | 'medium' | 'large';
  speed?: 'slow' | 'medium' | 'fast';
}

const { 
  particleCount = 50, 
  color = '#7c3aed', 
  size = 'medium',
  speed = 'medium' 
} = Astro.props;

const sizeClasses = {
  small: 'w-1 h-1',
  medium: 'w-2 h-2', 
  large: 'w-3 h-3'
};

const speedClasses = {
  slow: 'animate-float-slow',
  medium: 'animate-float',
  fast: 'animate-float-fast'
};
---

<div class="particle-background absolute inset-0 overflow-hidden pointer-events-none">
  <div id="particles-container" class="relative w-full h-full">
    <!-- Particles will be generated by JavaScript -->
  </div>
</div>

<style>
  @keyframes float-slow {
    0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); }
    25% { transform: translateY(-20px) translateX(10px) rotate(90deg); }
    50% { transform: translateY(-10px) translateX(-15px) rotate(180deg); }
    75% { transform: translateY(-30px) translateX(5px) rotate(270deg); }
  }

  @keyframes float {
    0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); }
    25% { transform: translateY(-30px) translateX(15px) rotate(90deg); }
    50% { transform: translateY(-15px) translateX(-20px) rotate(180deg); }
    75% { transform: translateY(-40px) translateX(10px) rotate(270deg); }
  }

  @keyframes float-fast {
    0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); }
    25% { transform: translateY(-40px) translateX(20px) rotate(90deg); }
    50% { transform: translateY(-20px) translateX(-25px) rotate(180deg); }
    75% { transform: translateY(-50px) translateX(15px) rotate(270deg); }
  }

  .animate-float-slow {
    animation: float-slow 8s ease-in-out infinite;
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  .animate-float-fast {
    animation: float-fast 4s ease-in-out infinite;
  }

  .particle {
    border-radius: 50%;
    opacity: 0.6;
    filter: blur(0.5px);
    background: radial-gradient(circle, currentColor 0%, transparent 70%);
  }

  .particle:nth-child(odd) {
    animation-direction: reverse;
  }

  .particle:nth-child(3n) {
    animation-delay: -2s;
  }

  .particle:nth-child(5n) {
    animation-delay: -4s;
  }
</style>

<script define:vars={{ particleCount, color, size, speed }}>
  document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('particles-container');
    if (!container) return;

    const sizeClasses = {
      small: 'w-1 h-1',
      medium: 'w-2 h-2', 
      large: 'w-3 h-3'
    };

    const speedClasses = {
      slow: 'animate-float-slow',
      medium: 'animate-float',
      fast: 'animate-float-fast'
    };

    // Create particles
    for (let i = 0; i < particleCount; i++) {
      const particle = document.createElement('div');
      particle.className = `particle absolute ${sizeClasses[size]} ${speedClasses[speed]}`;
      particle.style.color = color;
      particle.style.left = Math.random() * 100 + '%';
      particle.style.top = Math.random() * 100 + '%';
      particle.style.animationDelay = Math.random() * 6 + 's';
      particle.style.animationDuration = (4 + Math.random() * 4) + 's';
      
      container.appendChild(particle);
    }
  });
</script>
