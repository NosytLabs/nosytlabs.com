---
import MainLayout from "@/layouts/MainLayout.astro";
import Breadcrumbs from "@/components/ui/Breadcrumbs.astro";
import HeroButton from "@/components/ui/HeroUIButtonAstro.astro";
import { createInternalLink } from "../../lib/constants";

interface Props {
  title: string;
  description: string;
  icon?: string;
  heroSubtitle?: string;
  benefits?: string[];
  features?: string[];
  price?: string;
  delivery?: string;
  popular?: boolean;
  category?: string;
  tags?: string[];
  featured?: boolean;
  timeline?: string;
  deliverables?: string[];
  ctaPrimary?: { text: string; href: string };
  ctaSecondary?: { text: string; href: string };
}

const {
  title,
  description,
  price,
  delivery,
  popular = false,
  benefits = [],
  features = [],
  deliverables = [],
  ctaPrimary = { text: "Start Your Project", href: createInternalLink("/contact") },
  ctaSecondary = { text: "Contact Us", href: createInternalLink("/contact") }
} = Astro.props;

const pageUrl = new URL(Astro.request.url).href;
---

<MainLayout title={title} description={description}>
  <script type="application/ld+json" is:inline set:html={JSON.stringify({
    '@context': 'https://schema.org',
    '@type': 'Service',
    name: title,
    description,
    provider: {
      '@type': 'Organization',
      name: 'NOSYT Labs',
      url: new URL(Astro.request.url).origin,
    },
    areaServed: 'Remote',
    serviceType: title,
    url: pageUrl,
    offers: {
      '@type': 'Offer',
      priceCurrency: 'USD',
      availability: 'https://schema.org/InStock',
    },
  })}></script>

  <!-- Breadcrumbs -->
  <div class="container pt-6 pb-4">
    <Breadcrumbs items={[
      { name: 'Home', url: createInternalLink('/') }, 
      { name: 'Services', url: createInternalLink('/services') }, 
      { name: title }
    ]} />
  </div>

  <!-- Hero Section -->
  <section class="py-8 md:py-12 lg:py-16 bg-gradient-to-br from-background via-background to-muted/5 relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-primary/2 via-transparent to-accent/2"></div>
    
    <div class="container-fixed relative z-10">
      <div class="max-w-6xl mx-auto text-center">
        {popular && (
          <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 border border-primary/20 mb-6">
            <div class="w-2 h-2 bg-primary rounded-full animate-pulse"></div>
            <span class="text-sm font-semibold text-primary uppercase tracking-wide">Most Popular</span>
          </div>
        )}
        
        <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold tracking-tight text-foreground mb-6 leading-tight">
          {title}
        </h1>
        
        <p class="text-xl lg:text-2xl text-muted-foreground leading-relaxed mb-8">
          {description}
        </p>
        
        {(price || delivery) && (
          <div class="inline-flex flex-col sm:flex-row items-center gap-6 p-6 bg-card/40 backdrop-blur-sm border border-border/30 rounded-2xl mb-8">
            {price && (
              <div class="flex items-baseline gap-2">
                <span class="text-4xl font-bold text-primary">{price}</span>
                <span class="text-base text-muted-foreground">Starting Price</span>
              </div>
            )}
            {delivery && (
              <div class="flex items-center gap-2 text-base text-muted-foreground">
                <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span class="font-medium">{delivery}</span>
              </div>
            )}
          </div>
        )}
        
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <HeroButton href={ctaPrimary.href} text={ctaPrimary.text} variant="gradient" size="lg" />
          <HeroButton href={ctaSecondary.href} text={ctaSecondary.text} variant="outline" size="lg" />
        </div>
      </div>
    </div>
  </section>

  <!-- Benefits Section -->
  {benefits.length > 0 && (
    <section class="py-12 md:py-16 bg-background">
      <div class="container-fixed">
        <div class="text-center mb-12">
          <h2 class="text-3xl md:text-4xl font-bold text-foreground mb-4">
            Key Benefits
          </h2>
          <p class="text-lg text-muted-foreground max-w-5xl mx-auto">
            Why this service is the right choice for your business
          </p>
        </div>
        
        <div class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 lg:gap-8 max-w-none">
          {benefits.map((benefit) => (
            <div class="group p-6 md:p-8 rounded-2xl bg-gradient-to-br from-content1 to-default-50/50 border-2 border-default-200/60 hover:border-success/60 hover:shadow-2xl hover:-translate-y-2 transition-all duration-500">
              <div class="flex items-start gap-4">
                <div class="w-8 h-8 rounded-xl bg-gradient-to-br from-success/20 to-success/10 border-2 border-success/40 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300">
                  <svg class="w-5 h-5 text-success" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
                  </svg>
                </div>
                <p class="text-foreground leading-relaxed text-base">{benefit}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Features Section -->
  {features.length > 0 && (
    <section class="py-12 md:py-16 bg-muted/10">
      <div class="container-fixed">
        <div class="text-center mb-12">
          <h2 class="text-3xl md:text-4xl font-bold text-foreground mb-4">
            What's Included
          </h2>
          <p class="text-lg text-muted-foreground max-w-5xl mx-auto">
            Everything you need to bring your project to life
          </p>
        </div>
        
        <div class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 lg:gap-8 max-w-none">
          {features.map((feature) => (
            <div class="group p-6 md:p-8 rounded-2xl bg-gradient-to-br from-content1 to-default-50/50 border-2 border-default-200/60 hover:border-primary/60 hover:shadow-2xl hover:-translate-y-2 transition-all duration-500">
              <div class="flex items-start gap-4">
                <div class="w-8 h-8 rounded-xl bg-gradient-to-br from-primary/20 to-accent/10 border-2 border-primary/40 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300">
                  <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
                  </svg>
                </div>
                <p class="text-foreground font-medium leading-relaxed text-base">{feature}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Deliverables Section -->
  {deliverables.length > 0 && (
    <section class="py-12 md:py-16 bg-background">
      <div class="container-fixed">
        <div class="text-center mb-12">
          <h2 class="text-3xl md:text-4xl font-bold text-foreground mb-4">
            Deliverables
          </h2>
          <p class="text-lg text-muted-foreground max-w-5xl mx-auto">
            What you'll receive upon project completion
          </p>
        </div>
        
        <div class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 lg:gap-8 max-w-none">
          {deliverables.map((deliverable) => (
            <div class="group p-6 md:p-8 rounded-2xl bg-gradient-to-br from-content1 to-default-50/50 border-2 border-default-200/60 hover:border-accent/60 hover:shadow-2xl hover:-translate-y-2 transition-all duration-500">
              <div class="flex items-start gap-4">
                <div class="w-8 h-8 rounded-xl bg-gradient-to-br from-accent/20 to-accent/10 border-2 border-accent/40 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300">
                  <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                </div>
                <p class="text-foreground leading-relaxed text-base">{deliverable}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Main Content (Markdown) -->
  <section class="py-12 md:py-16 bg-muted/10">
    <div class="container-fixed">
      <div class="prose prose-lg max-w-6xl mx-auto prose-headings:text-foreground prose-p:text-foreground/90 prose-a:text-primary prose-strong:text-foreground prose-ul:text-foreground/90 prose-ol:text-foreground/90">
        <slot />
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-12 md:py-16 bg-gradient-to-br from-primary/5 to-accent/5">
    <div class="container-fixed">
      <div class="max-w-6xl mx-auto text-center">
        <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-foreground mb-6">
          Ready to Get Started?
        </h2>
        <p class="text-xl text-muted-foreground mb-8 max-w-4xl mx-auto">
          Let's discuss your project and create a custom solution that exceeds your expectations.
        </p>
        
        <div class="flex flex-col sm:flex-row gap-4 justify-center mb-12">
          <HeroButton href="/contact" text="Get Free Consultation" variant="gradient" size="lg" />
          <HeroButton href="/services" text="View All Services" variant="outline" size="lg" />
        </div>
        
        <div class="grid sm:grid-cols-3 xl:grid-cols-4 gap-6 lg:gap-8 max-w-none">
          <div class="group p-6 md:p-8 rounded-2xl bg-gradient-to-br from-content1 to-default-50/50 border-2 border-default-200/60 hover:border-primary/60 hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 text-center">
            <div class="w-16 h-16 md:w-18 md:h-18 rounded-3xl bg-gradient-to-br from-primary/20 to-accent/10 border-2 border-primary/40 flex items-center justify-center mx-auto mb-5 group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg">
              <svg class="w-8 h-8 md:w-9 md:h-9 text-primary group-hover:text-accent transition-colors duration-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <h4 class="text-lg font-bold text-foreground mb-3 group-hover:text-primary transition-colors">Fast Response</h4>
            <p class="text-base text-muted-foreground leading-relaxed">Get a proposal within 24 hours</p>
          </div>
          
          <div class="group p-6 md:p-8 rounded-2xl bg-gradient-to-br from-content1 to-default-50/50 border-2 border-default-200/60 hover:border-success/60 hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 text-center">
            <div class="w-16 h-16 md:w-18 md:h-18 rounded-3xl bg-gradient-to-br from-success/20 to-success/10 border-2 border-success/40 flex items-center justify-center mx-auto mb-5 group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg">
              <svg class="w-8 h-8 md:w-9 md:h-9 text-success group-hover:text-success transition-colors duration-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <h4 class="text-lg font-bold text-foreground mb-3 group-hover:text-success transition-colors">No Obligation</h4>
            <p class="text-base text-muted-foreground leading-relaxed">Free consultation, no commitment</p>
          </div>
          
          <div class="group p-6 md:p-8 rounded-2xl bg-gradient-to-br from-content1 to-default-50/50 border-2 border-default-200/60 hover:border-accent/60 hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 text-center">
            <div class="w-16 h-16 md:w-18 md:h-18 rounded-3xl bg-gradient-to-br from-accent/20 to-accent/10 border-2 border-accent/40 flex items-center justify-center mx-auto mb-5 group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg">
              <svg class="w-8 h-8 md:w-9 md:h-9 text-accent group-hover:text-accent transition-colors duration-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
              </svg>
            </div>
            <h4 class="text-lg font-bold text-foreground mb-3 group-hover:text-accent transition-colors">Quick Start</h4>
            <p class="text-base text-muted-foreground leading-relaxed">Projects start within 1 week</p>
          </div>
        </div>
      </div>
    </div>
  </section>
</MainLayout>
