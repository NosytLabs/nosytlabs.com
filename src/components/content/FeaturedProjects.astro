---
// Featured Projects Component with enhanced visual design
import Card from '../ui/Card.astro';
import Button from '../ui/Button.astro';
import Icon from '../ui/Icon.astro';
import ResponsiveImageOptimizer from '../layout/ResponsiveImageOptimizer.astro';

const projects = [
  {
    title: "E-Commerce Platform",
    description: "A modern, scalable e-commerce solution with AI-powered recommendations and real-time analytics.",
    image: "ecommerce-platform-inline",
    demoUrl: "https://demo.ecommerce-platform.com",
    githubUrl: "https://github.com/nosytlabs/ecommerce-platform",
    tech: ["React", "Node.js", "MongoDB", "AI/ML"],
    category: "Web Development",
    featured: true
  },
  {
    title: "AI Content Generator",
    description: "Intelligent content creation tool powered by advanced language models and natural language processing.",
    image: "ai-content-generator-inline",
    demoUrl: "https://demo.ai-content-generator.com",
    githubUrl: "https://github.com/nosytlabs/ai-content-generator",
    tech: ["Python", "TensorFlow", "FastAPI", "React"],
    category: "AI Integration",
    featured: true
  },
  {
    title: "Performance Dashboard",
    description: "Real-time performance monitoring dashboard with advanced analytics and automated optimization suggestions.",
    image: "performance-dashboard-inline",
    demoUrl: "https://demo.performance-dashboard.com",
    githubUrl: "https://github.com/nosytlabs/performance-dashboard",
    tech: ["Vue.js", "D3.js", "Node.js", "Redis"],
    category: "Analytics",
    featured: true
  }
];

const techIcons = {
  "React": "react",
  "Node.js": "nodejs",
  "MongoDB": "database",
  "AI/ML": "ai-integration",
  "Python": "python",
  "TensorFlow": "ai-integration",
  "FastAPI": "api",
  "Vue.js": "vuejs",
  "D3.js": "chart",
  "Redis": "database"
};
---

<section class="relative py-16 sm:py-20 lg:py-24 bg-gradient-to-br from-[hsl(var(--surface-secondary))] to-[hsl(var(--surface-muted))] dark:from-[hsl(var(--surface-elevated))] dark:to-[hsl(var(--surface-dark))] overflow-hidden">
  <!-- Background Elements -->
  <div class="absolute inset-0 overflow-hidden">
    <div class="absolute top-0 left-1/4 w-72 sm:w-96 h-72 sm:h-96 bg-gradient-to-r from-[hsl(var(--primary))]/10 to-[hsl(var(--accent))]/10 rounded-full blur-3xl"></div>
    <div class="absolute bottom-0 right-1/4 w-72 sm:w-96 h-72 sm:h-96 bg-gradient-to-r from-[hsl(var(--accent))]/10 to-[hsl(var(--success))]/10 rounded-full blur-3xl"></div>
  </div>

  <div class="container relative z-10 px-4 sm:px-6 lg:px-8">
    <!-- Section Header -->
    <div class="section-header text-center mb-12 sm:mb-16 lg:mb-20">
      <div class="badge inline-flex items-center px-3 sm:px-4 py-2 bg-[hsl(var(--primary))]/10 text-[hsl(var(--primary))] rounded-full text-sm font-medium mb-4 sm:mb-6">
        <Icon name="portfolio" size="sm" class="mr-2" aria-hidden="true" />
        Featured Work
      </div>
      <h2 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-[hsl(var(--text-primary))] dark:text-[hsl(var(--text-on-dark))] mb-4 sm:mb-6 leading-tight">
        Our Latest Projects
      </h2>
      <p class="text-base sm:text-lg md:text-xl text-[hsl(var(--text-secondary))] dark:text-[hsl(var(--text-tertiary))] max-w-3xl mx-auto leading-relaxed">
        Discover how we've helped businesses transform their digital presence with innovative solutions and cutting-edge technology.
      </p>
    </div>

    <!-- Projects Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8 mb-12 sm:mb-16">
      {projects.map((project, index) => (
        <Card class="group hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 bg-white/90 dark:bg-[hsl(var(--surface-elevated))]/90 backdrop-blur-sm overflow-hidden h-full flex flex-col">
          <!-- Project Image -->
          <div class="relative overflow-hidden rounded-t-xl mb-4 sm:mb-6 flex-shrink-0">
            {project.image === 'ecommerce-platform-inline' ? (
              <svg width="100%" height="192" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg" class="w-full h-40 sm:h-48 md:h-56 object-cover transition-transform duration-500 group-hover:scale-110">
                <defs>
                  <linearGradient id="bg-ecommerce-content" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                  </linearGradient>
                  <linearGradient id="card-ecommerce-content" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.95" />
                    <stop offset="100%" style="stop-color:#f8fafc;stop-opacity:0.95" />
                  </linearGradient>
                </defs>
                <rect width="400" height="300" fill="url(#bg-ecommerce-content)"/>
                <rect x="20" y="40" width="360" height="220" rx="8" fill="url(#card-ecommerce-content)" stroke="#e2e8f0" stroke-width="2"/>
                <rect x="20" y="40" width="360" height="30" rx="8" fill="#f1f5f9"/>
                <circle cx="35" cy="55" r="4" fill="#ef4444"/>
                <circle cx="50" cy="55" r="4" fill="#f59e0b"/>
                <circle cx="65" cy="55" r="4" fill="#10b981"/>
                <rect x="90" y="48" width="200" height="14" rx="7" fill="#ffffff" stroke="#e2e8f0"/>
                <text x="95" y="58" font-family="Arial, sans-serif" font-size="8" fill="#64748b">ecommerce-platform.demo</text>
                <g transform="translate(180, 120)">
                  <rect x="0" y="15" width="40" height="30" rx="4" fill="#667eea" opacity="0.1"/>
                  <path d="M8 4l2.5 14h19l2.5-14H8z" fill="none" stroke="#667eea" stroke-width="2"/>
                  <circle cx="15" cy="25" r="2" fill="#667eea"/>
                  <circle cx="25" cy="25" r="2" fill="#667eea"/>
                  <path d="M8 4H4" stroke="#667eea" stroke-width="2"/>
                </g>
                <rect x="50" y="100" width="80" height="60" rx="4" fill="#ffffff" stroke="#e2e8f0"/>
                <rect x="55" y="105" width="70" height="30" rx="2" fill="#f8fafc"/>
                <rect x="55" y="140" width="40" height="8" rx="2" fill="#667eea"/>
                <rect x="100" y="140" width="20" height="8" rx="2" fill="#10b981"/>
                <rect x="150" y="100" width="80" height="60" rx="4" fill="#ffffff" stroke="#e2e8f0"/>
                <rect x="155" y="105" width="70" height="30" rx="2" fill="#f8fafc"/>
                <rect x="155" y="140" width="40" height="8" rx="2" fill="#667eea"/>
                <rect x="200" y="140" width="20" height="8" rx="2" fill="#10b981"/>
                <rect x="250" y="100" width="80" height="60" rx="4" fill="#ffffff" stroke="#e2e8f0"/>
                <rect x="255" y="105" width="70" height="30" rx="2" fill="#f8fafc"/>
                <rect x="255" y="140" width="40" height="8" rx="2" fill="#667eea"/>
                <rect x="300" y="140" width="20" height="8" rx="2" fill="#10b981"/>
              </svg>
            ) : project.image === 'ai-content-generator-inline' ? (
              <svg width="100%" height="192" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg" class="w-full h-40 sm:h-48 md:h-56 object-cover transition-transform duration-500 group-hover:scale-110">
                <defs>
                  <linearGradient id="bg-ai-content" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#06b6d4;stop-opacity:1" />
                  </linearGradient>
                </defs>
                <rect width="400" height="300" fill="url(#bg-ai-content)"/>
                <rect x="50" y="50" width="300" height="200" rx="12" fill="#ffffff" stroke="#e5e7eb" stroke-width="2"/>
                <rect x="70" y="80" width="260" height="30" rx="4" fill="#f3f4f6"/>
                <rect x="80" y="90" width="80" height="10" rx="2" fill="#8b5cf6"/>
                <rect x="170" y="90" width="120" height="10" rx="2" fill="#e5e7eb"/>
                <rect x="70" y="130" width="260" height="30" rx="4" fill="#f3f4f6"/>
                <rect x="80" y="140" width="100" height="10" rx="2" fill="#06b6d4"/>
                <rect x="190" y="140" width="100" height="10" rx="2" fill="#e5e7eb"/>
                <rect x="70" y="180" width="260" height="30" rx="4" fill="#f3f4f6"/>
                <rect x="80" y="190" width="140" height="10" rx="2" fill="#10b981"/>
                <rect x="230" y="190" width="60" height="10" rx="2" fill="#e5e7eb"/>
                <circle cx="320" cy="80" r="15" fill="#8b5cf6" opacity="0.2"/>
                <path d="M315 75l5 5 5-5" stroke="#8b5cf6" stroke-width="2" fill="none"/>
              </svg>
            ) : project.image === 'performance-dashboard-inline' ? (
              <svg width="100%" height="192" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg" class="w-full h-40 sm:h-48 md:h-56 object-cover transition-transform duration-500 group-hover:scale-110">
                <defs>
                  <linearGradient id="bg-performance" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
                  </linearGradient>
                </defs>
                <rect width="400" height="300" fill="url(#bg-performance)"/>
                <rect x="30" y="40" width="340" height="220" rx="8" fill="#ffffff" stroke="#e5e7eb" stroke-width="2"/>
                <rect x="50" y="70" width="80" height="60" rx="4" fill="#f0fdf4" stroke="#10b981"/>
                <text x="90" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#10b981" font-weight="bold">98%</text>
                <text x="90" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">Performance</text>
                <rect x="160" y="70" width="80" height="60" rx="4" fill="#fef3c7" stroke="#f59e0b"/>
                <text x="200" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#f59e0b" font-weight="bold">2.1s</text>
                <text x="200" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">Load Time</text>
                <rect x="270" y="70" width="80" height="60" rx="4" fill="#dbeafe" stroke="#3b82f6"/>
                <text x="310" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#3b82f6" font-weight="bold">1.2M</text>
                <text x="310" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">Requests</text>
                <path d="M50 180 L100 160 L150 140 L200 120 L250 100 L300 90 L350 80" stroke="#10b981" stroke-width="3" fill="none"/>
                <circle cx="50" cy="180" r="3" fill="#10b981"/>
                <circle cx="100" cy="160" r="3" fill="#10b981"/>
                <circle cx="150" cy="140" r="3" fill="#10b981"/>
                <circle cx="200" cy="120" r="3" fill="#10b981"/>
                <circle cx="250" cy="100" r="3" fill="#10b981"/>
                <circle cx="300" cy="90" r="3" fill="#10b981"/>
                <circle cx="350" cy="80" r="3" fill="#10b981"/>
              </svg>
            ) : (
              <ResponsiveImageOptimizer
                src={project.image}
                alt={`${project.title} preview`}
                width={400}
                height={300}
                aspectRatio="4/3"
                loading="lazy"
                fetchpriority="low"
                class="w-full h-40 sm:h-48 md:h-56 object-cover transition-transform duration-500 group-hover:scale-110"
              />
            )}
            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            
            <!-- Category Badge -->
            <div class="absolute top-3 sm:top-4 left-3 sm:left-4">
              <span class="inline-flex items-center px-2 sm:px-3 py-1 bg-[hsl(var(--primary))]/90 text-white text-xs font-medium rounded-full backdrop-blur-sm">
                {project.category}
              </span>
            </div>

            <!-- Featured Badge -->
            {project.featured && (
              <div class="absolute top-3 sm:top-4 right-3 sm:right-4">
                <span class="inline-flex items-center px-2 sm:px-3 py-1 bg-[hsl(var(--accent))]/90 text-white text-xs font-medium rounded-full backdrop-blur-sm">
                  <Icon name="star" size="xs" class="mr-1" aria-hidden="true" />
                  Featured
                </span>
              </div>
            )}
          </div>

          <!-- Project Content -->
          <div class="p-4 sm:p-6 flex flex-col flex-grow">
            <!-- Project Title -->
            <h3 class="text-lg sm:text-xl md:text-2xl font-bold text-[hsl(var(--text-primary))] dark:text-[hsl(var(--text-on-dark))] mb-3 sm:mb-4 group-hover:text-[hsl(var(--primary))] transition-colors duration-300">
              {project.title}
            </h3>

            <!-- Project Description -->
            <p class="text-sm sm:text-base md:text-lg text-[hsl(var(--text-secondary))] dark:text-[hsl(var(--text-tertiary))] mb-4 sm:mb-6 leading-relaxed flex-grow">
              {project.description}
            </p>

            <!-- Tech Stack -->
            <div class="mb-4 sm:mb-6">
              <h4 class="text-xs sm:text-sm font-semibold text-[hsl(var(--text-primary))] dark:text-[hsl(var(--text-on-dark))] mb-2 sm:mb-3">Technologies Used:</h4>
              <div class="flex flex-wrap gap-2">
                {project.tech.map((tech) => (
                  <span class="inline-flex items-center px-2 sm:px-3 py-1 bg-[hsl(var(--surface-muted))] dark:bg-[hsl(var(--surface-dark))] text-[hsl(var(--text-secondary))] dark:text-[hsl(var(--text-tertiary))] text-xs sm:text-sm rounded-full border border-[hsl(var(--border-primary))]/20">
                    <Icon name={techIcons[tech] || "code"} size="xs" class="mr-1" aria-hidden="true" />
                    {tech}
                  </span>
                ))}
              </div>
            </div>

            <!-- Project Links -->
            <div class="flex flex-col sm:flex-row gap-3 mt-auto">
              <a 
                href={project.demoUrl}
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center justify-center px-3 sm:px-4 py-2 bg-gradient-to-r from-[hsl(var(--primary))] to-[hsl(var(--accent))] text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 min-h-[40px] text-xs sm:text-sm focus-enhanced flex-1"
              >
                <Icon name="external-link" size="xs" class="mr-2" aria-hidden="true" />
                Live Demo
              </a>
              
              <a 
                href={project.githubUrl}
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center justify-center px-3 sm:px-4 py-2 border-2 border-[hsl(var(--primary))] text-[hsl(var(--primary))] font-semibold rounded-lg hover:bg-[hsl(var(--primary))] hover:text-white transition-all duration-300 min-h-[40px] text-xs sm:text-sm focus-enhanced flex-1"
              >
                <Icon name="github" size="xs" class="mr-2" aria-hidden="true" />
                View Code
              </a>
            </div>
          </div>
        </Card>
      ))}
    </div>

    <!-- Call to Action -->
    <div class="text-center">
      <h3 class="text-xl sm:text-2xl md:text-3xl font-bold text-[hsl(var(--text-primary))] dark:text-[hsl(var(--text-on-dark))] mb-4 sm:mb-6">
        Ready to Start Your Project?
      </h3>
      <p class="text-base sm:text-lg md:text-xl text-[hsl(var(--text-secondary))] dark:text-[hsl(var(--text-tertiary))] mb-6 sm:mb-8 max-w-2xl mx-auto leading-relaxed">
        Let's collaborate to bring your vision to life with innovative solutions tailored to your business needs.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
        <Button 
          href="/contact"
          variant="primary"
          size="lg"
          class="inline-flex items-center min-w-[160px] justify-center"
        >
          Start Your Project
          <Icon name="arrow-right" size="sm" class="ml-2" aria-hidden="true" />
        </Button>
        
        <Button 
          href="/portfolio"
          variant="outline"
          size="lg"
          class="inline-flex items-center min-w-[160px] justify-center"
        >
          View All Projects
        </Button>
      </div>
    </div>
  </div>
</section>

<style>
  /* Enhanced card hover effects */
  .card-enhanced:hover {
    transform: translateY(-8px) scale(1.02);
  }

  /* Smooth image transitions */
  .card-enhanced img {
    transition: transform 0.5s ease;
  }

  /* Badge animations */
  .badge {
    transition: all 0.3s ease;
  }

  /* Tech stack styling */
  .tech-stack {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
  }

  /* Ensure consistent card heights */
  .grid > * {
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  /* Enhanced responsive design */
  @media (max-width: 640px) {
    .section-header {
      margin-bottom: 2rem;
    }
    
    .grid {
      gap: 1rem;
    }
  }

  @media (min-width: 1024px) {
    .grid {
      gap: 2rem;
    }
  }
</style>