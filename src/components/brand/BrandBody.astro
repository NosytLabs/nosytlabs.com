---
export interface Props {
  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl';
  leading?: 'tight' | 'snug' | 'normal' | 'relaxed' | 'loose';
  align?: 'left' | 'center' | 'right' | 'justify';
  variant?: 'body' | 'caption' | 'label' | 'description';
  emphasis?: boolean;
  class?: string;
}

const { size = 'md', leading = 'normal', align = 'left', variant = 'body', emphasis = false, class: className } = Astro.props;
---

<p class={`brand-body size-${size} leading-${leading} align-${align} variant-${variant} ${emphasis ? 'emphasis' : ''} ${className || ''}`}>
  <slot />
</p>

<style>
  .brand-body {
    font-family: var(--font-family-body);
    color: var(--color-brand-text-primary);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    line-height: var(--line-height-body);
  }

  /* Size variants */
  .size-xs { font-size: var(--font-size-xs); }
  .size-sm { font-size: var(--font-size-sm); }
  .size-md { font-size: var(--font-size-base); }
  .size-lg { font-size: var(--font-size-lg); }
  .size-xl { font-size: var(--font-size-xl); }

  /* Leading variants */
  .leading-tight { line-height: var(--line-height-tight); }
  .leading-snug { line-height: var(--line-height-snug); }
  .leading-normal { line-height: var(--line-height-normal); }
  .leading-relaxed { line-height: var(--line-height-relaxed); }
  .leading-loose { line-height: var(--line-height-loose); }

  /* Alignment */
  .align-left { text-align: left; }
  .align-center { text-align: center; }
  .align-right { text-align: right; }
  .align-justify { text-align: justify; }

  /* Variant styles - WCAG AA Compliant */
  .variant-body { color: hsl(var(--text-primary)); }
  .variant-caption {
    color: hsl(var(--text-secondary));
    font-size: var(--font-size-sm);
  }
  .variant-label {
    color: hsl(var(--text-primary));
    font-weight: var(--font-weight-medium);
  }
  .variant-description {
    color: hsl(var(--text-muted));
  }

  /* Links and code within body */
  .brand-body :global(a) {
    color: var(--color-brand-accent);
    text-decoration: underline;
    transition: color var(--transition-fast);
    min-height: 48px /* Fixed: 8px grid compliance */;
    display: inline-flex;
    align-items: center;
  }

  .brand-body :global(a:hover) {
    color: var(--color-brand-accent-muted);
  }

  .brand-body :global(a:focus-visible) {
    outline: 2px solid var(--color-brand-accent);
    outline-offset: var(--spacing-xs);
  }

  .brand-body :global(code) {
    font-family: var(--font-family-mono);
    background: var(--color-surface-secondary);
    color: var(--color-brand-accent);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius-sm);
    border: 1px solid var(--color-border);
  }

  /* ===== RESPONSIVE DESIGN ===== */
  /* Mobile-first responsive typography */
  .brand-body {
    font-size: clamp(0.875rem, 0.8rem + 0.3vw, 1rem);
    line-height: 1.6;
  }

  /* Responsive sizing */
  .size-xs { font-size: clamp(0.75rem, 0.7rem + 0.2vw, 0.875rem); }
  .size-sm { font-size: clamp(0.875rem, 0.8rem + 0.3vw, 1rem); }
  .size-md { font-size: clamp(1rem, 0.9rem + 0.4vw, 1.125rem); }
  .size-lg { font-size: clamp(1.125rem, 1rem + 0.5vw, 1.25rem); }
  .size-xl { font-size: clamp(1.25rem, 1.1rem + 0.6vw, 1.5rem); }

  /* Responsive alignment */
  .align-left { text-align: left; }
  .align-center { text-align: center; }
  .align-right { text-align: right; }
  .align-justify { text-align: justify; }

  /* Touch-friendly interactions */
  .brand-body :global(a),
  .brand-body :global(button),
  .brand-body :global(input),
  .brand-body :global(select),
  .brand-body :global(textarea) {
    min-height: 48px /* Fixed: 8px grid compliance */;
    min-width: 48px /* Fixed: 8px grid compliance */;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--grid-sm) var(--grid-md);
  }

  /* Responsive spacing */
  .brand-body {
    margin-bottom: var(--grid-lg);
  }

  .brand-body:last-child {
    margin-bottom: 0;
  }

  /* Mobile optimizations */
  @media (max-width: var(--breakpoint-md)) {
    .brand-body {
      font-size: clamp(0.875rem, 1.5vw + 0.7rem, 1rem);
      line-height: 1.7;
    }

    .size-xl {
      font-size: clamp(1.125rem, 2vw + 0.9rem, 1.25rem);
    }

    .brand-body :global(a),
    .brand-body :global(button) {
      padding: var(--grid-md) var(--grid-lg);
      min-height: 48px;
    }
  }

  /* Tablet optimizations */
  @media (min-width: var(--breakpoint-md)) and (max-width: var(--breakpoint-lg)) {
    .brand-body {
      font-size: clamp(0.9rem, 1vw + 0.8rem, 1.05rem);
    }
  }

  /* Desktop optimizations */
  @media (min-width: 1024px) {
    .brand-body {
      font-size: clamp(0.95rem, 0.5vw + 0.9rem, 1.1rem);
    }
  }

  /* Emphasis */
  .emphasis { 
    font-weight: var(--font-weight-semibold); 
    color: var(--color-brand-text-primary);
  }

  @media print {
    .brand-body { 
      color: var(--color-brand-secondary, var(--color-brand-primary) /* Fixed: design token */) !important; 
    }
  }
</style>
